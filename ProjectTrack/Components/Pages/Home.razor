@page "/home"
@using DataModel.Model
@inject NavigationManager Nav
@inject TransactionService TransactionService

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-5">
    <MudPaper Elevation="3" Class="p-5">
        <MudText Typo="Typo.h4" Class="mb-3" Color="Color.Primary" Align="Align.Center">Welcome Back!</MudText>
        <MudText Typo="Typo.body1" Align="Align.Center" Class="mb-4">
            Today is @DateTime.Now.ToString("dddd, MMMM dd, yyyy"). Here's your personalized summary:
        </MudText>

        <!-- Display Recent Overview -->
        <MudGrid Gutter="true">
            <MudItem xs="12" sm="6">
                <MudPaper Elevation="3" Class="p-4">
                    <MudText Typo="Typo.h6" Class="mb-3">Total Balance</MudText>
                    <MudText Typo="Typo.h4" Color="Color.Success">$@TransactionService.GetTotalBalance().ToString("C")</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12" sm="6">
                <MudPaper Elevation="3" Class="p-4">
                    <MudText Typo="Typo.h6" Class="mb-3">Recent Transactions</MudText>
                    @if (TransactionService.Transactions.Any())
                    {
                        <ul>
                            @foreach (var transaction in TransactionService.Transactions.Take(3))
                            {
                                <li>@transaction.Description - @transaction.Amount.ToString("C") (@transaction.Type)</li>
                            }
                        </ul>
                    }
                    else
                    {
                        <MudText Typo="Typo.body2" Color="Color.Secondary">No recent transactions available.</MudText>
                    }
                </MudPaper>
            </MudItem>
        </MudGrid>

        <!-- Logout Button -->
        <MudDivider Class="my-4" />
        <MudButton Variant="Variant.Filled" Color="Color.Error" FullWidth="true" OnClick="Logout">
            Logout
        </MudButton>
    </MudPaper>
</MudContainer>

<style>
    .mt-5 {
        margin-top: 5rem;
    }

    ul {
        list-style: none;
        padding: 0;
    }

        ul li {
            margin: 5px 0;
        }
</style>

@code {
    private void Logout()
    {
        // Perform logout logic (e.g., clearing session data)
        Nav.NavigateTo("/login", true);
    }
}
